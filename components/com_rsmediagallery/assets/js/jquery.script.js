function rsmg_add_lang(a,b){if(typeof a=="object"){for(j in a)rsmg_lang_vars[j]=a[j];return true}return rsmg_lang_vars[a]=b}function rsmg_get_lang(a,b){if(typeof rsmg_lang_vars[a]!="undefined"){val=rsmg_lang_vars[a];if(b){if(val.indexOf("%s")>-1)val=val.replace("%s",b);else if(val.indexOf("%d")>-1)val=val.replace("%d",b)}return val}return a}function rsmg_init_load_more(a){if(a("#rsmg_load_more").length>0){var b=a("#rsmg_load_more").attr("rel");var c=0;if(b>0)c=b-a("ul#rsmg_gallery").children().length;if(c<0)c=0;a("#rsmg_load_more").attr("rel",c);a("#rsmg_load_more").html(rsmg_get_lang("RSMG_LOAD_MORE",a("#rsmg_load_more").attr("rel")));a("#rsmg_load_more").click(function(b){b.preventDefault();b.shiftKey?rsmg_get_items(a,false,{limitall:1,limit:a("#rsmg_load_more").attr("rel")}):rsmg_get_items(a)});a(document).keydown(function(b){if(b.shiftKey)a("#rsmg_load_more").html(rsmg_get_lang("RSMG_LOAD_ALL",a("#rsmg_load_more").attr("rel")))});a(document).keyup(function(b){a("#rsmg_load_more").html(rsmg_get_lang("RSMG_LOAD_MORE",a("#rsmg_load_more").attr("rel")))})}}function rsmg_get_original_limitstart(a){return parseInt(a("#rsmg_original_limitstart").val())}function rsmg_init_items(a){a("#rsmg_gallery li img").hover(function(){a(this).stop().animate({opacity:.7},"slow")},function(){a(this).stop().animate({opacity:1},"slow")});if(typeof rsmg_init_lightbox2=="function")rsmg_init_lightbox2();rsmg_init_equal_size(a)}function rsmg_init_equal_size(a){var b=0;var c=[];if(a(".rsmg_item_container").length==0)return;var d=a(".rsmg_item_container").offset().top;var e=a(".rsmg_item_container").length-1;a(".rsmg_item_container").each(function(f,g){var h=a(g).offset().top;if(d!=h){for(var i=0;i<c.length;i++)if(b>0)c[i].css("height",b);h=a(g).offset().top;d=h;b=0;c.length=0}b=Math.max(b,a(g).height());c.push(a(g));if(f==e){for(var i=0;i<c.length;i++)if(b>0)c[i].css("height",b)}})}function rsmg_get_items_filter(a,b){var c={limitstart:a("ul#rsmg_gallery").children().length+rsmg_get_original_limitstart(a),Itemid:a("#rsmg_itemid").val()};if(b)for(var d in b)c[d]=b[d];return c}function rsmg_get_items(a,b,c,d,e){var f=a("#rsmg_gallery");if(b==true)f.empty();if(e===false)e=false;else e=true;a.ajax({type:"POST",url:rsmg_get_root()+"/index.php?option=com_rsmediagallery&task=getitems&format=raw",data:rsmg_get_items_filter(a,c),async:e,beforeSend:function(){var b=a("<li>",{id:"rsmg_loader_container"});var c=a("<div>",{"class":"rsmg_item_container"});b.append(c);f.append(b);a("#rsmg_load_more").hide("fade",500)},success:function(b){a("#rsmg_loader_container").remove();if(typeof b=="object"&&b.items&&b.total){var c=f.children().length;a(b.items).each(function(b,d){var e=a("<li>");var g=a("<div>",{"class":"rsmg_item_container"});var h=a("<a>",{href:d.href,"class":"rsmg_lightbox",rel:"{'link': '"+d.full+"', 'title': '#rsmg_item_"+c+"', 'id': '"+d.id+"'}"});if(d.open_in_new_page)h.attr("target","_blank");var i=a("<img>",{src:d.thumb,alt:d.title});i.attr({width:d.thumb_width,height:d.thumb_height});h.append(i);var j="";if(d.show_title_list==1){j=a("<a>",{href:d.href,"class":"rsmg_title"}).html(d.title);if(d.open_in_new_page)j.attr("target","_blank")}var l="";if(d.show_description_list==1)l=a("<span>",{"class":"rsmg_item_description"}).html(d.description);var m=a("<div>",{id:"rsmg_item_"+c}).css("display","none");if(d.show_title_detail==1)m.append(a("<h2>",{"class":"rsmg_title"}).html(d.title));if(d.show_description_detail==1)m.append(d.full_description);var n="";if(d.download_original==1){n=a("<div>",{"class":"rsmg_download rsmg_toolbox"});a_download_original=a("<a>",{href:d.download}).html(rsmg_get_lang("RSMG_DOWNLOAD"));n.append(a_download_original)}var o="";if(d.show_hits==1)o=a("<div>",{"class":"rsmg_views rsmg_toolbox"}).html(rsmg_get_lang(d.hits==1?"RSMG_HIT":"RSMG_HITS",d.hits));var p="";if(d.show_created==1)p=a("<div>",{"class":"rsmg_calendar rsmg_toolbox"}).html(rsmg_get_lang("RSMG_CREATED",d.created));var q="";if(d.show_modified==1)q=a("<div>",{"class":"rsmg_calendar rsmg_toolbox"}).html(rsmg_get_lang("RSMG_MODIFIED",d.modified));var r="";if(d.show_tags==1)r=a("<p>",{"class":"rsmg_tags"}).html(rsmg_get_lang("RSMG_TAGS")+": <strong>"+d.tags+"</strong>");var s=a("<span>",{"class":"rsmg_clear"});var t=a("<span>",{"class":"rsmg_clear"});m.append(s,n,o,p,q,t,r);e.append(g.append(h,j,l,m));f.append(e);c++});rsmg_init_items(a);var e=rsmg_get_original_limitstart(a);if(b.total>a("ul#rsmg_gallery").children().length+e){var g=b.total-(a("ul#rsmg_gallery").children().length+e);a("#rsmg_load_more").html(rsmg_get_lang("RSMG_LOAD_MORE",g));a("#rsmg_load_more").attr("rel",g);a("#rsmg_load_more").show("fade",500)}else a("#rsmg_load_more").attr("rel",0);if(typeof d=="function"){d(b)}}}})}function rsmg_hit_item(a){cid=parseInt(jQuery("#lightbox-image").attr("rel"));if(!isNaN(cid)&&cid>0&&rsmg_hit.indexOf(cid)==-1){rsmg_hit.push(cid);rsmg_to_hit.push(cid);if(rsmg_hit_timer)clearTimeout(rsmg_hit_timer);rsmg_hit_timer=setTimeout(function(){jQuery.ajax({type:"POST",url:rsmg_get_root()+"/index.php",data:{option:"com_rsmediagallery",task:"hititem",cid:rsmg_to_hit}});rsmg_to_hit.length=0},2500)}}jQuery(document).ready(function(a){if(a("#rsmg_prev_page").length>0)a("#rsmg_prev_page").hide();rsmg_init_load_more(a);rsmg_init_items(a);var b=a("#rsmg_image_container img").attr("src");if(a.browser.msie&&a.browser.version<9){b+=b.indexOf("?")==-1?"?":"&";b+="random="+Math.floor(Math.random()*11e3)}a("#rsmg_loader_container").removeAttr("style");var c=a("<img>").load(function(){if(a("#rsmg_thumb_container > img").outerWidth()>a("#rsmg_image_container").parent().outerWidth())a("#rsmg_image_container img").css("width","100%");a("#rsmg_loader_container").remove();a("#rsmg_image_container").removeClass("rsmg_hidden_from_view");a("#rsmg_image_container img").show("blind",500)}).attr("src",b)});var rsmg_lang_vars={};var rsmg_hit=[];var rsmg_to_hit=[];var rsmg_hit_timer=false